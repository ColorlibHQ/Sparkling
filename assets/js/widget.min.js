jQuery(document).ready(function(){var e={selector:null,size:null,container:null,frame:function(){return this._frame?this._frame:(this._frame=wp.media({title:"Media",button:{text:"Update"},multiple:!1}),this._frame.on("open",this.updateFrame).state("library").on("select",this.select),this._frame)},select:function(){var t=jQuery(".attachments").find(".selected").attr("data-id"),n=jQuery(".sparkling-media-container").find(e.selector),i={action:"sparkling_get_attachment_media",attachment_id:t};if(!n.length)return!1;jQuery.post(Sparkling.ajaxurl,i,function(t){var i=jQuery(e.container).find("img");i.length>0?i.replaceWith(t.image):jQuery(e.container).find(".attachment-media-view").append(t.image),jQuery(e.container).find(".attachment-media-view .placeholder").hide(),n.val(t.id).trigger("change")},"json")},init:function(){var t=jQuery("#wpbody, .wp-customizer");t.on("click",".sparkling-media-container .upload-button",function(t){var n=jQuery(this).parents(".sparkling-media-container"),i=n.find("input").attr("id");t.preventDefault(),e.container=n,e.selector="#"+i,e.frame().open()}),t.on("click",".sparkling-media-container .remove-button",function(e){var t=jQuery(this).parents(".sparkling-media-container"),n=t.find("input"),i=t.find("img"),a=t.find(".placeholder");e.preventDefault(),i.remove(),a.show(),n.val("").trigger("change")})}};e.init()});